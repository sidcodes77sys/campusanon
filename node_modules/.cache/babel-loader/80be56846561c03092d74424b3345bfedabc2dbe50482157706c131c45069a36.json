{"ast":null,"code":"import _objectSpread from\"C:/Work/projects/campusanon/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState}from'react';import{updateProfile}from'../lib/supabase';import{useAuth}from'../lib/AuthContext';import{styles,theme}from'./styles';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProfilePage(){var _profile$alias;const{profile,refreshProfile}=useAuth();const[bio,setBio]=useState((profile===null||profile===void 0?void 0:profile.bio)||'');const[interests,setInterests]=useState((profile===null||profile===void 0?void 0:profile.interests)||[]);const[newInterest,setNewInterest]=useState('');const[saving,setSaving]=useState(false);const[saved,setSaved]=useState(false);const[error,setError]=useState('');function addInterest(){const trimmed=newInterest.trim();if(trimmed&&interests.length<6&&!interests.includes(trimmed)){setInterests([...interests,trimmed]);setNewInterest('');}}function removeInterest(idx){setInterests(interests.filter((_,i)=>i!==idx));}async function save(){setSaving(true);setError('');setSaved(false);try{await updateProfile(profile.id,{bio,interests});refreshProfile();setSaved(true);setTimeout(()=>setSaved(false),2500);}catch(e){setError('Failed to save. Try again.');}finally{setSaving(false);}}return/*#__PURE__*/_jsxs(\"div\",{style:styles.page,children:[/*#__PURE__*/_jsx(\"h2\",{style:styles.pageTitle,children:\"My Profile \\uD83D\\uDC64\"}),/*#__PURE__*/_jsxs(\"div\",{style:styles.profileEditCard,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.profileEditAvatar,children:profile===null||profile===void 0?void 0:(_profile$alias=profile.alias)===null||_profile$alias===void 0?void 0:_profile$alias[0]}),/*#__PURE__*/_jsx(\"div\",{style:styles.profileEditAlias,children:profile===null||profile===void 0?void 0:profile.alias}),/*#__PURE__*/_jsx(\"div\",{style:styles.profileEditNote,children:\"Your alias is randomly generated for privacy.\"}),/*#__PURE__*/_jsxs(\"div\",{style:styles.profileSection,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Email (verified \\u2705)\"}),/*#__PURE__*/_jsx(\"input\",{style:_objectSpread(_objectSpread({},styles.input),{},{background:'#f5f5f5',color:'#888'}),value:(profile===null||profile===void 0?void 0:profile.email)||'',disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.profileSection,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Gender\"}),/*#__PURE__*/_jsx(\"input\",{style:_objectSpread(_objectSpread({},styles.input),{},{background:'#f5f5f5',color:'#888'}),value:(profile===null||profile===void 0?void 0:profile.gender)||'',disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.profileSection,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Looking for\"}),/*#__PURE__*/_jsx(\"input\",{style:_objectSpread(_objectSpread({},styles.input),{},{background:'#f5f5f5',color:'#888'}),value:(profile===null||profile===void 0?void 0:profile.looking_for)||'',disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.profileSection,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Bio (optional)\"}),/*#__PURE__*/_jsx(\"textarea\",{style:_objectSpread(_objectSpread({},styles.input),{},{height:80,resize:'vertical'}),value:bio,onChange:e=>setBio(e.target.value),maxLength:200,placeholder:\"A bit about you (no personal info!)...\"}),/*#__PURE__*/_jsxs(\"small\",{style:{color:'#aaa'},children:[bio.length,\"/200\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.profileSection,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Interests (max 6)\"}),/*#__PURE__*/_jsx(\"div\",{style:styles.interestRow,children:interests.map((int,i)=>/*#__PURE__*/_jsxs(\"span\",{style:_objectSpread(_objectSpread({},styles.interestTag),{},{cursor:'pointer'}),onClick:()=>removeInterest(i),children:[int,\" \\u2715\"]},i))}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,marginTop:8},children:[/*#__PURE__*/_jsx(\"input\",{style:_objectSpread(_objectSpread({},styles.input),{},{margin:0,flex:1}),placeholder:\"Add interest... (press Enter)\",value:newInterest,onChange:e=>setNewInterest(e.target.value),onKeyDown:e=>e.key==='Enter'&&(e.preventDefault(),addInterest())}),/*#__PURE__*/_jsx(\"button\",{style:styles.secondaryBtn,onClick:addInterest,type:\"button\",children:\"Add\"})]}),/*#__PURE__*/_jsxs(\"small\",{style:{color:'#aaa'},children:[interests.length,\"/6 interests\"]})]}),error&&/*#__PURE__*/_jsx(\"div\",{style:styles.error,children:error}),/*#__PURE__*/_jsx(\"button\",{style:styles.primaryBtn,onClick:save,disabled:saving,children:saving?'Saving...':saved?'âœ… Saved!':'Save Profile'})]})]});}","map":{"version":3,"names":["useState","updateProfile","useAuth","styles","theme","jsx","_jsx","jsxs","_jsxs","ProfilePage","_profile$alias","profile","refreshProfile","bio","setBio","interests","setInterests","newInterest","setNewInterest","saving","setSaving","saved","setSaved","error","setError","addInterest","trimmed","trim","length","includes","removeInterest","idx","filter","_","i","save","id","setTimeout","e","style","page","children","pageTitle","profileEditCard","profileEditAvatar","alias","profileEditAlias","profileEditNote","profileSection","label","_objectSpread","input","background","color","value","email","disabled","gender","looking_for","height","resize","onChange","target","maxLength","placeholder","interestRow","map","int","interestTag","cursor","onClick","display","gap","marginTop","margin","flex","onKeyDown","key","preventDefault","secondaryBtn","type","primaryBtn"],"sources":["C:/Work/projects/campusanon/src/pages/ProfilePage.js"],"sourcesContent":["import { useState } from 'react';\nimport { updateProfile } from '../lib/supabase';\nimport { useAuth } from '../lib/AuthContext';\nimport { styles, theme } from './styles';\n\nexport default function ProfilePage() {\n  const { profile, refreshProfile } = useAuth();\n  const [bio, setBio] = useState(profile?.bio || '');\n  const [interests, setInterests] = useState(profile?.interests || []);\n  const [newInterest, setNewInterest] = useState('');\n  const [saving, setSaving] = useState(false);\n  const [saved, setSaved] = useState(false);\n  const [error, setError] = useState('');\n\n  function addInterest() {\n    const trimmed = newInterest.trim();\n    if (trimmed && interests.length < 6 && !interests.includes(trimmed)) {\n      setInterests([...interests, trimmed]);\n      setNewInterest('');\n    }\n  }\n\n  function removeInterest(idx) {\n    setInterests(interests.filter((_, i) => i !== idx));\n  }\n\n  async function save() {\n    setSaving(true); setError(''); setSaved(false);\n    try {\n      await updateProfile(profile.id, { bio, interests });\n      refreshProfile();\n      setSaved(true);\n      setTimeout(() => setSaved(false), 2500);\n    } catch (e) {\n      setError('Failed to save. Try again.');\n    } finally {\n      setSaving(false);\n    }\n  }\n\n  return (\n    <div style={styles.page}>\n      <h2 style={styles.pageTitle}>My Profile ðŸ‘¤</h2>\n      <div style={styles.profileEditCard}>\n        <div style={styles.profileEditAvatar}>{profile?.alias?.[0]}</div>\n        <div style={styles.profileEditAlias}>{profile?.alias}</div>\n        <div style={styles.profileEditNote}>Your alias is randomly generated for privacy.</div>\n\n        <div style={styles.profileSection}>\n          <label style={styles.label}>Email (verified âœ…)</label>\n          <input style={{...styles.input, background:'#f5f5f5', color:'#888'}} value={profile?.email || ''} disabled />\n        </div>\n\n        <div style={styles.profileSection}>\n          <label style={styles.label}>Gender</label>\n          <input style={{...styles.input, background:'#f5f5f5', color:'#888'}} value={profile?.gender || ''} disabled />\n        </div>\n\n        <div style={styles.profileSection}>\n          <label style={styles.label}>Looking for</label>\n          <input style={{...styles.input, background:'#f5f5f5', color:'#888'}} value={profile?.looking_for || ''} disabled />\n        </div>\n\n        <div style={styles.profileSection}>\n          <label style={styles.label}>Bio (optional)</label>\n          <textarea\n            style={{...styles.input, height:80, resize:'vertical'}}\n            value={bio}\n            onChange={e => setBio(e.target.value)}\n            maxLength={200}\n            placeholder=\"A bit about you (no personal info!)...\"\n          />\n          <small style={{color:'#aaa'}}>{bio.length}/200</small>\n        </div>\n\n        <div style={styles.profileSection}>\n          <label style={styles.label}>Interests (max 6)</label>\n          <div style={styles.interestRow}>\n            {interests.map((int, i) => (\n              <span key={i} style={{...styles.interestTag, cursor:'pointer'}} onClick={() => removeInterest(i)}>\n                {int} âœ•\n              </span>\n            ))}\n          </div>\n          <div style={{display:'flex', gap:8, marginTop:8}}>\n            <input\n              style={{...styles.input, margin:0, flex:1}}\n              placeholder=\"Add interest... (press Enter)\"\n              value={newInterest}\n              onChange={e => setNewInterest(e.target.value)}\n              onKeyDown={e => e.key === 'Enter' && (e.preventDefault(), addInterest())}\n            />\n            <button style={styles.secondaryBtn} onClick={addInterest} type=\"button\">Add</button>\n          </div>\n          <small style={{color:'#aaa'}}>{interests.length}/6 interests</small>\n        </div>\n\n        {error && <div style={styles.error}>{error}</div>}\n        <button style={styles.primaryBtn} onClick={save} disabled={saving}>\n          {saving ? 'Saving...' : saved ? 'âœ… Saved!' : 'Save Profile'}\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}