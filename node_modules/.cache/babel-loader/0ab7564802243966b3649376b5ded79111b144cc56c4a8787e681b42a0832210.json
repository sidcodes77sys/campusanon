{"ast":null,"code":"import _objectSpread from\"C:/Work/projects/campusanon/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useState}from'react';import{getDiscoverProfiles,likeProfile,passProfile,isOnline}from'../lib/supabase';import{useAuth}from'../lib/AuthContext';import{styles,theme}from'./styles';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Dashboard(){var _card$alias;const{profile}=useAuth();const[cards,setCards]=useState([]);const[current,setCurrent]=useState(0);const[action,setAction]=useState(null);const[loading,setLoading]=useState(true);const[matchNotif,setMatchNotif]=useState(false);useEffect(()=>{if(profile)loadProfiles();},[profile]);async function loadProfiles(){setLoading(true);try{setCards(await getDiscoverProfiles(profile));}catch(e){console.error(e);}finally{setLoading(false);}}async function handleLike(){const card=cards[current];if(!card)return;setAction('liked');try{const result=await likeProfile(profile.id,card.id);if(result.matched){setMatchNotif(true);setTimeout(()=>setMatchNotif(false),4000);}}catch(e){console.error(e);}setTimeout(()=>{setCurrent(c=>c+1);setAction(null);},500);}async function handlePass(){const card=cards[current];if(!card)return;setAction('passed');try{await passProfile(profile.id,card.id);}catch(e){console.error(e);}setTimeout(()=>{setCurrent(c=>c+1);setAction(null);},500);}if(loading)return/*#__PURE__*/_jsxs(\"div\",{style:styles.loadingWrap,children:[/*#__PURE__*/_jsx(\"span\",{style:{color:theme.neon},children:\"\\u25C8\"}),\"\\xA0loading profiles...\"]});const card=cards[current];return/*#__PURE__*/_jsxs(\"div\",{style:styles.page,children:[/*#__PURE__*/_jsxs(\"h2\",{style:styles.pageTitle,children:[/*#__PURE__*/_jsx(\"span\",{style:{color:theme.neon},children:\"\\u25C8\"}),\" Discover\"]}),/*#__PURE__*/_jsx(\"p\",{style:styles.pageSubtitle,children:\"anonymous profiles \\xB7 no names \\xB7 just vibes\"}),matchNotif&&/*#__PURE__*/_jsx(\"div\",{style:styles.matchBanner,children:\"\\u26A1 it's a match \\u2014 check your matches tab\"}),card?/*#__PURE__*/_jsxs(\"div\",{style:styles.discoverWrap,children:[/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread(_objectSpread({},styles.profileCard),action==='liked'?styles.cardLiked:{}),action==='passed'?styles.cardPassed:{}),children:[/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:0,left:0,right:0,height:2,background:theme.gradient}}),/*#__PURE__*/_jsx(\"div\",{style:styles.profileAvatar,children:((_card$alias=card.alias)===null||_card$alias===void 0?void 0:_card$alias[0])||'?'}),/*#__PURE__*/_jsx(\"div\",{style:styles.profileAlias,children:card.alias}),/*#__PURE__*/_jsxs(\"div\",{style:styles.profileMeta,children:[\"age \",card.age,\" \\xA0\\xB7\\xA0 \",isOnline(card.last_seen)?/*#__PURE__*/_jsx(\"span\",{style:{color:theme.success},children:\"\\u25CF online\"}):/*#__PURE__*/_jsx(\"span\",{style:{color:theme.textDim},children:\"\\u25CF offline\"})]}),card.bio&&/*#__PURE__*/_jsxs(\"p\",{style:styles.profileBio,children:[\"\\\"\",card.bio,\"\\\"\"]}),/*#__PURE__*/_jsx(\"div\",{style:styles.interestRow,children:(card.interests||[]).map(i=>/*#__PURE__*/_jsx(\"span\",{style:styles.interestTag,children:i},i))}),/*#__PURE__*/_jsxs(\"div\",{style:styles.actionRow,children:[/*#__PURE__*/_jsx(\"button\",{style:styles.passBtn,onClick:handlePass,disabled:!!action,children:\"\\u2715 pass\"}),/*#__PURE__*/_jsx(\"button\",{style:styles.likeBtn,onClick:handleLike,disabled:!!action,children:\"\\u2665 like\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.cardCounter,children:[current+1,\" / \",cards.length,\" profiles\"]})]}):/*#__PURE__*/_jsxs(\"div\",{style:styles.emptyState,children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:48,marginBottom:16},children:\"\\u25C8\"}),/*#__PURE__*/_jsx(\"h3\",{style:{color:theme.text,marginBottom:8},children:\"you've seen everyone\"}),/*#__PURE__*/_jsx(\"p\",{style:{marginBottom:24},children:\"check back later for new profiles\"}),/*#__PURE__*/_jsx(\"button\",{style:_objectSpread(_objectSpread({},styles.primaryBtn),{},{width:'auto',padding:'10px 28px'}),onClick:()=>{setCurrent(0);loadProfiles();},children:\"refresh\"})]})]});}","map":{"version":3,"names":["useEffect","useState","getDiscoverProfiles","likeProfile","passProfile","isOnline","useAuth","styles","theme","jsx","_jsx","jsxs","_jsxs","Dashboard","_card$alias","profile","cards","setCards","current","setCurrent","action","setAction","loading","setLoading","matchNotif","setMatchNotif","loadProfiles","e","console","error","handleLike","card","result","id","matched","setTimeout","c","handlePass","style","loadingWrap","children","color","neon","page","pageTitle","pageSubtitle","matchBanner","discoverWrap","_objectSpread","profileCard","cardLiked","cardPassed","position","top","left","right","height","background","gradient","profileAvatar","alias","profileAlias","profileMeta","age","last_seen","success","textDim","bio","profileBio","interestRow","interests","map","i","interestTag","actionRow","passBtn","onClick","disabled","likeBtn","cardCounter","length","emptyState","fontSize","marginBottom","text","primaryBtn","width","padding"],"sources":["C:/Work/projects/campusanon/src/pages/Dashboard.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { getDiscoverProfiles, likeProfile, passProfile, isOnline } from '../lib/supabase';\nimport { useAuth } from '../lib/AuthContext';\nimport { styles, theme } from './styles';\n\nexport default function Dashboard() {\n  const { profile } = useAuth();\n  const [cards, setCards] = useState([]);\n  const [current, setCurrent] = useState(0);\n  const [action, setAction] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [matchNotif, setMatchNotif] = useState(false);\n\n  useEffect(() => { if (profile) loadProfiles(); }, [profile]);\n\n  async function loadProfiles() {\n    setLoading(true);\n    try { setCards(await getDiscoverProfiles(profile)); }\n    catch (e) { console.error(e); }\n    finally { setLoading(false); }\n  }\n\n  async function handleLike() {\n    const card = cards[current];\n    if (!card) return;\n    setAction('liked');\n    try {\n      const result = await likeProfile(profile.id, card.id);\n      if (result.matched) { setMatchNotif(true); setTimeout(() => setMatchNotif(false), 4000); }\n    } catch (e) { console.error(e); }\n    setTimeout(() => { setCurrent(c => c + 1); setAction(null); }, 500);\n  }\n\n  async function handlePass() {\n    const card = cards[current];\n    if (!card) return;\n    setAction('passed');\n    try { await passProfile(profile.id, card.id); } catch (e) { console.error(e); }\n    setTimeout(() => { setCurrent(c => c + 1); setAction(null); }, 500);\n  }\n\n  if (loading) return <div style={styles.loadingWrap}><span style={{color: theme.neon}}>◈</span>&nbsp;loading profiles...</div>;\n\n  const card = cards[current];\n\n  return (\n    <div style={styles.page}>\n      <h2 style={styles.pageTitle}>\n        <span style={{color: theme.neon}}>◈</span> Discover\n      </h2>\n      <p style={styles.pageSubtitle}>anonymous profiles · no names · just vibes</p>\n\n      {matchNotif && <div style={styles.matchBanner}>⚡ it's a match — check your matches tab</div>}\n\n      {card ? (\n        <div style={styles.discoverWrap}>\n          <div style={{\n            ...styles.profileCard,\n            ...(action === 'liked' ? styles.cardLiked : {}),\n            ...(action === 'passed' ? styles.cardPassed : {}),\n          }}>\n            {/* top accent line */}\n            <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: 2, background: theme.gradient }} />\n            <div style={styles.profileAvatar}>{card.alias?.[0] || '?'}</div>\n            <div style={styles.profileAlias}>{card.alias}</div>\n            <div style={styles.profileMeta}>\n              age {card.age} &nbsp;·&nbsp; {isOnline(card.last_seen)\n                ? <span style={{color: theme.success}}>● online</span>\n                : <span style={{color: theme.textDim}}>● offline</span>}\n            </div>\n            {card.bio && <p style={styles.profileBio}>\"{card.bio}\"</p>}\n            <div style={styles.interestRow}>\n              {(card.interests || []).map(i => <span key={i} style={styles.interestTag}>{i}</span>)}\n            </div>\n            <div style={styles.actionRow}>\n              <button style={styles.passBtn} onClick={handlePass} disabled={!!action}>✕ pass</button>\n              <button style={styles.likeBtn} onClick={handleLike} disabled={!!action}>♥ like</button>\n            </div>\n          </div>\n          <div style={styles.cardCounter}>{current + 1} / {cards.length} profiles</div>\n        </div>\n      ) : (\n        <div style={styles.emptyState}>\n          <div style={{fontSize: 48, marginBottom: 16}}>◈</div>\n          <h3 style={{color: theme.text, marginBottom: 8}}>you've seen everyone</h3>\n          <p style={{marginBottom: 24}}>check back later for new profiles</p>\n          <button style={{...styles.primaryBtn, width: 'auto', padding: '10px 28px'}} onClick={() => { setCurrent(0); loadProfiles(); }}>\n            refresh\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}